---
title: "Reference"
description: "Complete configuration reference for Edge"
---

This page covers all configuration options for Edge.

## Configuration File

Edge uses a JSON configuration file. Pass the path as the first argument:

```bash
./edge config.json
```

### Full Example

```json config.json
{
  "listen_address": "0.0.0.0",
  "listen_port": 8080,
  "upstream_url": "https://agent-http-intake.logs.datadoghq.com",
  "logs_url": "https://agent-http-intake.logs.datadoghq.com",
  "metrics_url": "https://api.datadoghq.com",
  "workspace_id": "your-workspace-id",
  "log_level": "info",
  "max_body_size": 1048576,
  "policy_providers": [
    {
      "id": "local",
      "type": "file",
      "path": "/etc/edge/policies.json"
    },
    {
      "id": "remote",
      "type": "http",
      "url": "https://api.usetero.com/v1/policies",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer your-api-key"
        }
      ]
    }
  ]
}
```

## Configuration Reference

### Server Settings

| Field            | Type   | Default       | Description                                            |
| ---------------- | ------ | ------------- | ------------------------------------------------------ |
| `listen_address` | string | `"127.0.0.1"` | IP address to bind to                                  |
| `listen_port`    | number | `8080`        | Port to listen on                                      |
| `max_body_size`  | number | `1048576`     | Maximum request body size in bytes (1MB default)       |
| `log_level`      | string | `"info"`      | Logging level: `trace`, `debug`, `info`, `warn`, `err` |

### Upstream Settings

| Field          | Type   | Required | Description                                                               |
| -------------- | ------ | -------- | ------------------------------------------------------------------------- |
| `upstream_url` | string | Yes      | Default upstream destination (fallback when specific URLs not set)        |
| `logs_url`     | string | No       | Upstream destination for log endpoints (falls back to `upstream_url`)     |
| `metrics_url`  | string | No       | Upstream destination for metrics endpoints (falls back to `upstream_url`) |

### Workspace Settings

| Field          | Type   | Required | Description                          |
| -------------- | ------ | -------- | ------------------------------------ |
| `workspace_id` | string | No       | Workspace identifier for policy sync |

### Policy Providers

The `policy_providers` array configures where Edge loads policies from.

#### File Provider

Loads policies from a local file and watches for changes.

```json
{
  "id": "local",
  "type": "file",
  "path": "/etc/edge/policies.json"
}
```

| Field  | Type   | Required | Description                         |
| ------ | ------ | -------- | ----------------------------------- |
| `id`   | string | Yes      | Unique identifier for this provider |
| `type` | string | Yes      | Must be `"file"`                    |
| `path` | string | Yes      | Path to the policy file             |

The file is watched using OS-native mechanisms (inotify on Linux, kqueue on
macOS). Changes are applied immediately.

#### HTTP Provider

Loads policies from an HTTP endpoint with periodic polling.

```json
{
  "id": "remote",
  "type": "http",
  "url": "https://api.example.com/policies",
  "headers": [
    {
      "name": "Authorization",
      "value": "Bearer token"
    }
  ]
}
```

| Field     | Type   | Required | Description                         |
| --------- | ------ | -------- | ----------------------------------- |
| `id`      | string | Yes      | Unique identifier for this provider |
| `type`    | string | Yes      | Must be `"http"`                    |
| `url`     | string | Yes      | URL to fetch policies from          |
| `headers` | array  | No       | HTTP headers to include in requests |

## Policy File Format

Policies are defined in a JSON file:

```json policies.json
{
  "policies": [
    {
      "id": "policy-1",
      "name": "Human-readable name",
      "description": "What this policy does",
      "enabled": true,
      "log": {
        "match": [...],
        "keep": "...",
        "transform": {...}
      }
    },
    {
      "id": "policy-2",
      "name": "Another policy",
      "metric": {
        "match": [...],
        "keep": true
      }
    }
  ]
}
```

See the [Policies](/edge/policies/log-filter) section for detailed policy
configuration.

## Environment Variables

| Variable         | Description                       |
| ---------------- | --------------------------------- |
| `TERO_LOG_LEVEL` | Override the configured log level |

## Logging Output

Edge outputs logs to stdout:

```json
2026-01-06T17:29:36.322Z [INFO] server.starting
2026-01-06T17:29:36.322Z [INFO] configuration.loaded path="bench/scaling/configs/generated/edge-datadog-4000.json"
2026-01-06T17:29:36.323Z [INFO] listen.address.configured address="127.0.0.1" port=8080
2026-01-06T17:29:36.323Z [INFO] upstream.configured url="http://127.0.0.1:9999"
2026-01-06T17:29:36.323Z [INFO] service.configured namespace="tero" name="tero-edge" instance_id="edge-1767720576323-6189588" version="latest"
2026-01-06T17:29:36.323Z [INFO] policy.loader.starting provider_count=1
2026-01-06T17:29:36.323Z [INFO] file.provider.configured path="/Users/jea/Code/tero/edge/bench/scaling/configs/generated/policies-4000.json"
2026-01-06T17:29:36.324Z [INFO] policies.loading path="/Users/jea/Code/tero/edge/bench/scaling/configs/generated/policies-4000.json"
2026-01-06T17:29:36.324Z [INFO] server.ready
2026-01-06T17:29:36.324Z [INFO] shutdown.hint pid=2496
2026-01-06T17:29:36.324Z [INFO] server.listening address="127.0.0.1" port=8080
```

### Log Levels

| Level   | Description                          |
| ------- | ------------------------------------ |
| `debug` | Debugging information (very verbose) |
| `info`  | Normal operation messages            |
| `warn`  | Warning conditions                   |
| `err`   | Error conditions                     |

## Health Checks

Edge exposes a health endpoint:

```bash
curl http://localhost:8080/_health
```

Returns `200 OK` when Edge is healthy and ready to process requests.

## Graceful Shutdown

Edge handles SIGINT and SIGTERM for graceful shutdown:

1. Stops accepting new connections
2. Waits for in-flight requests to complete
3. Exits cleanly

## Resource Requirements

Recommended minimums:

| Resource | Minimum | Recommended      |
| -------- | ------- | ---------------- |
| CPU      | .5 core | 1+ cores         |
| Memory   | 10MB    | 100MB            |
| Disk     | 10MB    | 100MB (for logs) |

Memory usage scales with:

- Number of policies loaded
- Size of compiled regex databases
- Request body sizes being processed

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Datadog Distribution"
    icon="dog"
    href="/edge/distributions/datadog"
  >
    Configure Edge for Datadog
  </Card>
  <Card
    title="OTLP Distribution"
    icon="tower-broadcast"
    href="/edge/distributions/otlp"
  >
    Configure Edge for OpenTelemetry
  </Card>
</CardGroup>
